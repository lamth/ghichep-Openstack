# Tìm hiểu Migrate máy ảo trong Openstack

## Mục lục
- [ Giới thiệu tổng quan về Migrate](#giới-thiệu-tổng-quan-về-migrate)
- [ Các kiểu migration trong Openstack](#các-kiểu-migration-trong-openstack)

---------------------------


## Giới thiệu tổng quan về Migrate

![](https://i.imgur.com/alvHyKf.png)

Migration là việc di chuyển máy ảo từ host vật lý này sang một host vật lý khác. Migration được sinh ra để làm nhiệm vụ hỗ trợ bảo trì, nâng cấp hệ thống. Ngày nay, nó được sử dụng với nhiều tác vụ khác:
- Cân bằng tải: Di chuyển VMs tới các host khác kh phát hiện host đang chạy có dấu hiệu quá tải.
- Bảo trì và nâng cấp hệ thống: Di chuyển máy ảo khỏi host trước khi thực hiện việc bảo trì và nâng cấp:
- Khôi phục lại máy ảo khi bị lỗi: Chạy máy ảo trên một host khác khi máy ảo trên một host lỗi.

Trong OpenStack, việc migrate được thực hiện giữa các node compute với nhau hoặc giữa các project trên cùng 1 node compute.


## Các kiểu migration trong Openstack
Openstack hỗ trợ hai kiểu migration:
- Cold migration
- Live migration:
  - True live migration
  - Block live migration.


**Luồng hoạt động khi thực hiện cold migrate**:
- Tắt máy ảo và ngắt kết nối đến volume
- Di chuyển thư mục của máy ảo.
- Nếu sử dụng qcow2 với baking files thì image sẽ được convert thành dạng flat.
- Với shared storage, di chuyển thư mục chứa máy ảo. Nếu không, copy toàn bộ thông qua SCP.

**Luồng hoạt động khi thực hiện live-migrade**:
- 



## Tài liệu tham khảo
https://github.com/thaonguyenvan/meditech-thuctap/blob/master/ThaoNV/Tim%20hieu%20OpenStack/docs/advance/migration.md