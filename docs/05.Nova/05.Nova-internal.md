# Tìm hiểu kiến trúc và cách các thành phần của nova làm việc với nhau


Bản nháp

## Luồng hoạt động khi tạo một instance

![](https://i.imgur.com/cget6dZ.png)

0. Người dùng cuối(có thể là Dashboard, CLI hay qua API) gửi thông tin đăng nhập tới Keystone để xác thực.
Sau khi Keystone xác thực được thông tin đăng nhập của người dùng, trả về cho người dùng hay trình duyệt một auth-token. Người dùng sau đó sẽ sử dụng token này cho những lần request tiếp theo đến các dịch vụ trong Openstack.
1. User sử dụng auth-token để gửi yêu cầu tạo máy ảo đến Nova-API.
2. Nova-API lấy auth-token từ yêu cầu của người dùng, gửi đến Keystone để xác thực xem auth-token đã hết hạn chưa và user có quyền là gì.
3. Keystone trả về kết quả xác thực và ủy quyền của auth-token về cho Nova-API. 
4. Nếu Token được xác thực và có quyền tạo máy ảo, Nova sẽ bắt đầu tạo máy ảo(tương đương câu lệnh `nova boot`)

## Tài liệu tham khảo
- https://jayeshc1990.wordpress.com/2018/11/10/openstack-instance-creation-workflow/